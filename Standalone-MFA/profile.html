<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Profile</title>

</head>
<body>
  <div id="content"></div>
  <script>
    const username = '<%- authenticatedUser.username %>';
    const firstname = '<%- authenticatedUser.firstname %>';
    const lastname = '<%- authenticatedUser.lastname %>';
    const idToken = '<%- authenticatedUser.id_token %>';
    const accessToken = '<%- authenticatedUser.access_token %>';
  // HTML page to render.
    var render = async function(){
          const par1 = document.createElement('p');
          par1.innerHTML = `Hello <b>${username}</b>`;
          document.getElementById('content').appendChild(par1);

          const par2 = document.createElement('p');
          par2.innerHTML = `<b>First Name:</b><br> ${firstname}`;
          document.getElementById('content').appendChild(par2);

          const par3 = document.createElement('p');
          par3.innerHTML = `<b>Last Name:</b><br> ${lastname}`;
          document.getElementById('content').appendChild(par3);

          const par4 = document.createElement('p');
          par4.innerHTML = `<div><br/><div><a target="_blank" href="https://jwt.io?token=${idToken}">ID Token</a></div><br/>${idToken}</div>`;
          document.getElementById('content').appendChild(par4);


          const logoutFragment = document.createElement('div');
          logoutFragment.innerHTML = `<button id="submit-login-form" onclick="logout();">
                                        LOGOUT
                                      </button>`;
          document.getElementById('content').appendChild(logoutFragment);
    }

    // Logout. Remove token from browser local storage.
    var logout = async function(){
      window.location.replace("/"); 
    }

    render()
  </script>
</body>
</html>